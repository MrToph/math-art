{"version":3,"sources":["../js/visualization.jsx"],"names":[],"mappings":"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","file":"visualization-compiled.js","sourcesContent":["class Visualization extends ISteppable{\r\n  constructor(element) {\r\n    super();\r\n    this.svg = null;\r\n    this.margin = {top: -0, right: -0, bottom: -0, left: -0};\r\n    this.width = 500;\r\n    this.height = 500;\r\n\r\n    this.currentStep = 0;\r\n    this.maxStep = 998;\r\n\r\n    let realWidth = this.width + this.margin.left + this.margin.right;\r\n    let realHeight = this.height + this.margin.top + this.margin.bottom;\r\n    let svg = d3.select(element).append(\"svg\")\r\n        .attr(\"viewBox\", \"0 0 \" + realWidth + \" \" + realHeight)\r\n        .append(\"g\")\r\n        .attr(\"transform\", \"translate(\" + this.margin.left + \",\" + this.margin.right + \")\")\r\n\r\n    this.svg = svg;\r\n\r\n    let rect = svg.append(\"rect\")\r\n                .attr(\"class\", \"svgOuterRect\")\r\n                .attr(\"x\", -this.margin.left)\r\n                .attr(\"y\", -this.margin.top)\r\n                .attr(\"width\", realWidth)\r\n                .attr(\"height\", realHeight);\r\n\r\n    this.translate = [0 * realWidth, 0];\r\n    this.scale = 1;\r\n    let container = svg.append(\"g\")\r\n                      .attr(\"transform\", \"translate(\" + this.translate[0] + \",\" + this.translate[1] + \"),scale(\" + this.scale + \")\");\r\n    this.container = container;\r\n    this.squares = container.append('svg:g');\r\n    this.texts = container.append('svg:g');\r\n\r\n    // Constants\r\n    this.colors = [\"#ff3232\", \"#32CD32\", \"#3232ff\", \"#000000\", \"#ffa500\", \"#8A2BE2\"];\r\n    this.sqSize = realHeight;\r\n\r\n    this.redraw(0);\r\n  }\r\n\r\ncreateData(step) {\r\n    this.textData = [{id: 1, x: 0.5 * this.sqSize, y: 0.75* this.sqSize, fontSize: \"48pt\"},\r\n                     {id: 2, x: 0.25 * this.sqSize, y: 0.25 * this.sqSize, fontSize: \"24pt\"}];\r\n    this.sqData = [];\r\n    let stepMod = step % 4;\r\n\r\n    this.sqData.push({x: 0, y: 0, width: this.sqSize, height: this.sqSize});\r\n    if(stepMod >= 1)\r\n            this.sqData.push({x: 0, y: 0.5 * this.sqSize, width: this.sqSize, height: 0.5 * this.sqSize});\r\n    if(stepMod >= 2)\r\n        this.sqData.push({x: 0, y: 0, width: 0.5 * this.sqSize, height: 0.5 * this.sqSize});\r\n\r\n}\r\n\r\nredraw(step = this.currentStep, forward){\r\n    this.currentStep = step;\r\n\r\n    this.createData(step);\r\n    this.squares.selectAll('.square').remove();\r\n    this.createSquares();\r\n    this.createText(step);\r\n    this.container.attr(\"transform\", \"translate(\" + this.translate[0] + \",\" + this.translate[1] + \")scale(\" + 1 + \")\");\r\n    if(step % 4 === 3){\r\n        this.container.transition()\r\n          .duration(2000)\r\n          .attr(\"transform\", \"translate(\" + this.translate[0] + \",\" + this.translate[1] + \")scale(\" + 2 + \")translate(\" + -0.5*this.sqSize + \",\" + 0 + \")\")\r\n          .each('end', () => stepper.onForward());\r\n    }\r\n}\r\n\r\ncreateText(step){\r\n    let texts = this.texts.selectAll(\".txt\").data(this.textData).enter().append('text').attr('class', 'txt');\r\n    texts = this.texts.selectAll(\".txt\")\r\n                        .text( d => {\r\n                            let stepMod = step % 4;\r\n                            if(d.id > stepMod) return \"\";\r\n                            let inv = 0;\r\n                            if(d.id == 1){\r\n                                inv = Math.ceil( ((stepMod === 3) ? step - 1 : step) / 2);\r\n                            }\r\n                            else{   // d.id == 2\r\n                                inv = Math.ceil( (step + 1) / 2);\r\n                            }\r\n                            if(inv < 31){\r\n                                inv = \"1/\" + Math.pow(2,inv);\r\n                            }\r\n                            else{\r\n                                inv = \"2^-\" + inv;\r\n                            }\r\n                            return inv;\r\n                        })\r\n                        .attr('text-anchor', \"middle\")  // horizontal alignment\r\n                        .attr('dominant-baseline', \"middle\")  // vertical alignment\r\n                        .attr('transform', d => \"translate(\" + (d.x) + \",\" + (1.1 * d.y) + \")\")\r\n                        .attr(\"font-size\", d => d.fontSize);\r\n}\r\n\r\n  createSquares(){\r\n    let squares = this.squares.selectAll(\".square\").data(this.sqData).enter().append('rect').attr('class', 'square');\r\n\r\n    squares = this.squares.selectAll(\".square\")\r\n                .attr('width', d => d.width)\r\n                .attr('height', d => d.height)\r\n                .attr('x', d => d.x )\r\n                .attr('y', d => d.y);\r\n  }\r\n\r\n  onStep(forward){\r\n    // always stop all transitions\r\n    this.container.interrupt().transition();\r\n    return super.onStep(forward);   // calls redraw\r\n  }\r\n}\r\n\r\nfunction endAll (transition, callback) {\r\n    var n;\r\n\r\n    if (transition.empty()) {\r\n        callback();\r\n    }\r\n    else {\r\n        n = transition.size();\r\n        transition.each(\"end\", () => {\r\n            n--;\r\n            if (n === 0) {\r\n                callback();\r\n            }\r\n        });\r\n    }\r\n}"]}