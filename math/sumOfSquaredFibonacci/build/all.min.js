!function(e){function t(n){if(r[n])return r[n].exports;var i=r[n]={exports:{},id:n,loaded:!1};return e[n].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var r={};return t.m=e,t.c=r,t.p="",t(0)}([function(e,t,r){e.exports=r(1)},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}var i=r(2),o=n(i),a=r(4),u=n(a),c=r(5),s=n(c);window.stepper={},jQuery(function(){window.stepper=new s["default"];var e=new o["default"](jQuery("#svgContainer").get(0));window.stepper.registerCallback(1,e.onStep.bind(e));var t=new u["default"](jQuery("#mathContainer").get(0));window.stepper.registerCallback(1,t.onStep.bind(t))})},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),c=function d(e,t,r){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,t);if(void 0===n){var i=Object.getPrototypeOf(e);return null===i?void 0:d(i,t,r)}if("value"in n)return n.value;var o=n.get;if(void 0!==o)return o.call(r)},s=r(3),l=n(s),f=function(e){function t(e){i(this,t);var r=o(this,Object.getPrototypeOf(t).call(this));r.svg=null,r.margin={top:-0,right:-0,bottom:-0,left:-0},r.width=1e3,r.height=500,r.currentStep=0,r.maxStep=7;var n=r.width+r.margin.left+r.margin.right,a=r.height+r.margin.top+r.margin.bottom;r.init(),r.eleSize=(r.height-r.borderSize)/r.fib[r.fib.length-1],r.translate=[.5*(n-r.borderSize-r.eleSize*(r.fib[r.fib.length-1]+r.fib[r.fib.length-2])),0],r.scale=1;var u=d3.select(e).append("svg").attr("viewBox","0 0 "+n+" "+a).append("g").attr("transform","translate("+r.margin.left+","+r.margin.right+")");r.svg=u,u.append("rect").attr("class","svgOuterRect").attr("x",-r.margin.left).attr("y",-r.margin.top).attr("width",n).attr("height",a);var c=u.append("g").attr("class","container").attr("transform","translate("+r.translate[0]+","+r.translate[1]+"),scale("+r.scale+")");return r.container=c,r.elements=r.container.append("g"),r.outer=r.container.append("g"),r.redraw(0),r}return a(t,e),u(t,[{key:"init",value:function(){this.fib=[1,1];for(var e=2;e<=this.maxStep;e++)this.fib[e]=this.fib[e-1]+this.fib[e-2];this.borderSize=50}},{key:"createData",value:function(e){for(var t=[],r=0;e>=r;r++){var n=this.createPoly(r);t.push(n)}this.groupData=t;var i=10,o=[],a=this.fib.reduce(function(t,r,n){return t+(e>=n&&n%2===1?r:0)},this.fib[0]),u=[this.borderSize,i],c=[this.borderSize,0],s=[this.borderSize+a*this.eleSize,0],l=[this.borderSize+a*this.eleSize,i],f={a:u,b:c,c:s,d:l,text:a,textOffset:[0,.5*this.borderSize],type:e%2};o.push(f),a=this.fib.reduce(function(t,r,n){return t+(e>=n&&n%2===0?r:0)},0),u=[i,this.borderSize],c=[0,this.borderSize],s=[0,this.borderSize+a*this.eleSize],l=[i,this.borderSize+a*this.eleSize];var d={a:u,b:c,c:s,d:l,text:a,textOffset:[.5*this.borderSize,0],type:1-e%2};o.push(d),this.outerData=o}},{key:"createPoly",value:function(e){var t=12;e>1&&(t+=Math.pow(this.fib[e],1.5)),t+="pt";var r=0,n=0;e%2===0?n=this.fib.reduce(function(t,r,n){return t+(e>n&&n%2===0?r:0)},0):r=this.fib.reduce(function(t,r,n){return t+(e>n&&n%2===1?r:0)},this.fib[0]),r*=this.eleSize,n*=this.eleSize;var i=this.eleSize*this.fib[e],o=[r,n],a=[r+i,n],u=[r+i,n+i],c=[r,n+i],s={id:e,a:o,b:a,c:u,d:c,text:this.fib[e],fontSize:t};return s}},{key:"redraw",value:function(){var e=arguments.length<=0||void 0===arguments[0]?this.currentStep:arguments[0];this.currentStep=e,this.createData(e),this.elements.selectAll(".groupContainer").remove(),this.outer.selectAll(".outerGroup").remove(),this.createElements(),this.createAnimations(e)}},{key:"createElements",value:function(){this.elements.attr("transform","translate("+this.borderSize+", "+this.borderSize+")");var e=this.elements.selectAll(".groupContainer").data(this.groupData);e.enter().append("g").attr("class","groupContainer");var t=d3.svg.line().x(function(e){return e[0]}).y(function(e){return e[1]}).interpolate("linear");this.elements.selectAll(".groupContainer").append("path").attr("class","element").attr("d",function(e){return t([e.a,e.b,e.c,e.d,e.a])}),this.elements.selectAll(".groupContainer").append("text").attr("class","txt").text(function(e){return e.text}).attr("text-anchor","middle").attr("dominant-baseline","middle").attr("font-size",function(e){return e.fontSize}).attr("transform",function(e){var t=[.5*(e.a[0]+e.b[0]),.55*(e.a[1]+e.c[1])];return"translate("+t[0]+","+t[1]+")"});var r=this.outer.selectAll(".outerGroup").data(this.outerData).enter().append("g").attr("class","outerGroup");r.append("polyline").attr("class","axis").attr("points",function(e){return e.a[0]+","+e.a[1]+" "+e.b[0]+","+e.b[1]+" "+e.c[0]+","+e.c[1]+" "+e.d[0]+","+e.d[1]}),r.append("text").attr("class","outerTxt").text(function(e){return e.text}).attr("text-anchor","middle").attr("dominant-baseline","middle").attr("transform",function(e){var t=[.5*(e.b[0]+e.c[0]),.5*(e.b[1]+e.c[1])];return"translate("+(t[0]+e.textOffset[0])+","+(t[1]+e.textOffset[1])+")"}).classed("firstColor",function(e){return 0===e.type}).classed("secondColor",function(e){return 1===e.type})}},{key:"createAnimations",value:function(e){var t=this.elements.selectAll(".element").filter(function(t){return t.id===e}),r=t.node().getTotalLength();t.attr("stroke-dasharray",r+" "+r).attr("stroke-dashoffset",r).transition().duration(1e3).ease("linear").attr("stroke-dashoffset",0)}},{key:"onStep",value:function(e){return c(Object.getPrototypeOf(t.prototype),"onStep",this).call(this,e)}}]),t}(l["default"]);t["default"]=f},function(e,t){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=function(){function e(){r(this,e),this.maxStep=0}return n(e,[{key:"redraw",value:function(){arguments.length<=0||void 0===arguments[0]?this.currentStep:arguments[0],arguments[1]}},{key:"onStep",value:function(e){var t=this.currentStep;e?t++:t--,t=Math.min(Math.max(t,0),this.maxStep);var r={canBackward:!1,canForward:!1};return t>0&&(r.canBackward=!0),t<this.maxStep&&(r.canForward=!0),t===this.currentStep?r:(this.currentStep=t,this.redraw(this.currentStep,e),r)}}]),e}();t["default"]=i},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var c=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=i(["definecolor{colorRed}{RGB}{255,50,50}definecolor{colorGreen}{RGB}{50,205,50}\n                                    definecolor{colorBlue}{RGB}{50,50,255}definecolor{colorYellow}{RGB}{255,165,0}definecolor{colorPurple}{RGB}{138,43,226}"],["\\definecolor{colorRed}{RGB}{255,50,50}\\definecolor{colorGreen}{RGB}{50,205,50}\n                                    \\definecolor{colorBlue}{RGB}{50,50,255}\\definecolor{colorYellow}{RGB}{255,165,0}\\definecolor{colorPurple}{RGB}{138,43,226}"]),l=i(["	extcolor{colorRed}{","} cdot 	extcolor{colorBlue}{","}"],["\\textcolor{colorRed}{","} \\cdot \\textcolor{colorBlue}{","}"]),f=r(3),d=n(f),h=function(e){function t(e){o(this,t);var r=a(this,Object.getPrototypeOf(t).call(this));return r.width=1200,r.height=500,r.currentStep=0,r.element=e,r.maxStep=7,r.oldInnerHTML="",MathJax.Hub.Queue(function(){r.jax=MathJax.Hub.getAllJax("mathContainer")[0]},function(){r.redraw(0)}),r}return u(t,e),c(t,[{key:"redraw",value:function(){var e=arguments.length<=0||void 0===arguments[0]?this.currentStep:arguments[0],t=this.getTextForCurrentStep(e);t!==this.oldInnerHTML&&(this.oldInnerHTML=t,MathJax.Hub.queue.Push(["Text",this.jax,t]))}},{key:"getTextForCurrentStep",value:function(e){if(void 0==this.fib){this.fib=[1,1];for(var t=2;t<=this.maxStep+1;t++)this.fib[t]=this.fib[t-1]+this.fib[t-2]}for(var r=String.raw(s),n=this.fib[0]+"^2",i=1;e>=i;i++)n+=" + "+this.fib[i]+"^2";return n+=" = ",n+=String.raw(l,this.fib[e],this.fib[e+1]),r+" \\smash{"+n+"}"}}]),t}(d["default"]);t["default"]=h},function(e,t){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=function(){function e(){r(this,e),this.currentLayer=1,this.callbacks=[],window.addEventListener("keydown",this.onKeyDown.bind(this),!1)}return n(e,[{key:"onForward",value:function(){var e=arguments.length<=0||void 0===arguments[0]?this.currentLayer:arguments[0];this.currentLayer=e,this.doStep(!0)}},{key:"onBackward",value:function(){var e=arguments.length<=0||void 0===arguments[0]?this.currentLayer:arguments[0];this.currentLayer=e,this.doStep(!1)}},{key:"doStep",value:function(e){for(var t={canBackward:!1,canForward:!1},r=0;r<this.callbacks[this.currentLayer].length;r++)t=this.callbacks[this.currentLayer][r](e);this.disableButtons(this.currentLayer,t)}},{key:"disableButtons",value:function(e,t){document.getElementById("leftBtn"+e).disabled=!t.canBackward,document.getElementById("rightBtn"+e).disabled=!t.canForward}},{key:"registerCallback",value:function(e,t){"undefined"==typeof this.callbacks[e]&&(this.callbacks[e]=[]),this.callbacks[e].push(t),this.disableButtons(e,{canBackward:!1,canForward:!0})}},{key:"onKeyDown",value:function(e){switch(e.keyCode){case 65:case 37:this.onBackward(1);break;case 68:case 39:this.onForward(1)}}}]),e}();t["default"]=i}]);