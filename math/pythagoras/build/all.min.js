"use strict";function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _taggedTemplateLiteral(a,b){return Object.freeze(Object.defineProperties(a,{raw:{value:Object.freeze(b)}}))}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function _inherits(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function _inherits(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function endAll(a,b){var c;a.empty()?b():(c=a.size(),a.each("end",function(){c--,0===c&&b()}))}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var stepper={};jQuery(function(){stepper=new Stepper;var a=new Pythagoras;a.init(d3.select("#svgContainer").node()),stepper.registerCallback(1,a.onStep.bind(a));var b=new MathContainer(d3.select("#mathContainer").node());stepper.registerCallback(1,b.onStep.bind(b))}),Number.prototype.clamp=function(a,b){return Math.min(Math.max(this,a),b)};var _createClass=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),ISteppable=function(){function a(){_classCallCheck(this,a),this.maxStep=0}return _createClass(a,[{key:"redraw",value:function(){arguments.length<=0||void 0===arguments[0]?this.currentStep:arguments[0]}},{key:"onStep",value:function(a){var b=this.currentStep;a?b++:b--,b=b.clamp(0,this.maxStep);var c={canBackward:!1,canForward:!1};return b>0&&(c.canBackward=!0),b<this.maxStep&&(c.canForward=!0),b===this.currentStep?c:(this.currentStep=b,this.redraw(this.currentStep),c)}}]),a}(),_createClass=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),_templateObject=_taggedTemplateLiteral(["definecolor{colorRed}{RGB}{255,50,50}definecolor{colorGreen}{RGB}{50,255,50}definecolor{colorBlue}{RGB}{50,50,255}"],["\\definecolor{colorRed}{RGB}{255,50,50}\\definecolor{colorGreen}{RGB}{50,255,50}\\definecolor{colorBlue}{RGB}{50,50,255}"]),_templateObject2=_taggedTemplateLiteral(["	extcolor{colorBlue}{a^2} + 	extcolor{colorGreen}{b^2} = 	extcolor{colorRed}{c^2}"],["\\textcolor{colorBlue}{a^2} + \\textcolor{colorGreen}{b^2} = \\textcolor{colorRed}{c^2}"]),MathContainer=function(a){function b(a){_classCallCheck(this,b);var c=_possibleConstructorReturn(this,Object.getPrototypeOf(b).call(this));return c.width=1200,c.height=500,c.currentStep=0,c.colors=["#ff3232","#32ff32","#3232ff"],c.element=a,c.maxStep=7,c.oldInnerHTML="",MathJax.Hub.Queue(function(){c.jax=MathJax.Hub.getAllJax("mathContainer")[0]},function(){c.redraw(0)}),c}return _inherits(b,a),_createClass(b,[{key:"redraw",value:function(){var a=(arguments.length<=0||void 0===arguments[0]?this.currentStep:arguments[0],this.getTextForCurrentStep());a!==this.oldInnerHTML&&(this.oldInnerHTML=a,MathJax.Hub.queue.Push(["Text",this.jax,a]))}},{key:"getTextForCurrentStep",value:function(){var a=String.raw(_templateObject),b="";switch(this.currentStep){case 5:case 6:case 7:b=String.raw(_templateObject2);break;default:b="a^2 + b^2 = c^2"}return a+" "+b}}]),b}(ISteppable),_createClass=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),_get=function a(b,c,d){null===b&&(b=Function.prototype);var e=Object.getOwnPropertyDescriptor(b,c);if(void 0===e){var f=Object.getPrototypeOf(b);return null===f?void 0:a(f,c,d)}if("value"in e)return e.value;var g=e.get;if(void 0!==g)return g.call(d)},Pythagoras=function(a){function b(){_classCallCheck(this,b);var a=_possibleConstructorReturn(this,Object.getPrototypeOf(b).call(this));return a.svg=null,a.margin={top:-5,right:-5,bottom:-5,left:-5},a.width=1200-a.margin.left-a.margin.right,a.height=500-a.margin.top-a.margin.bottom,a.currentStep=0,a.squareSize=450,a.squareOffset=[{top:25,left:50},{top:25,left:a.width-a.squareSize-50}],a.r=.7*a.squareSize,a.colors=["#ff3232","#32ff32","#3232ff"],a.maxStep=7,a.translate=[0,0],a.scale=1,a}return _inherits(b,a),_createClass(b,[{key:"init",value:function(a){var b=this.width+this.margin.left+this.margin.right,c=this.height+this.margin.top+this.margin.bottom,d=d3.select(a).append("svg").attr("viewBox","0 0 "+b+" "+c).append("g").attr("transform","translate("+this.margin.left+","+this.margin.right+")");this.svg=d;var e=(d.append("rect").attr("class","svgOuterRect").attr("x",-this.margin.left).attr("y",-this.margin.top).attr("width",b).attr("height",c),d.append("g").attr("transform","translate("+this.translate[0]+","+this.translate[1]+"),scale("+this.scale+")"));this.createGradient(),this.container=e,this.triangles=e.append("svg:g"),this.squares=e.append("svg:g"),this.texts=e.append("svg:g"),this.dragPoint=e.append("svg:g"),this.redraw(0)}},{key:"getSVG",value:function(){return this.svg}},{key:"toSVGCoordinates",value:function(a){var b=[a[0],a[1]];return b[0]=(b[0]-this.translate[0])/this.scale,b[1]=(b[1]-this.translate[1])/this.scale,b}},{key:"idToPoint",value:function(a){return jQuery.grep(this.points,function(b){return b.id===a})[0]}},{key:"createShapes",value:function(a){switch(a){case 0:this.points=[{id:100,x:0,y:0},{id:101,x:this.r,y:0},{id:102,x:0,y:this.squareSize-this.r},{id:999,x:this.squareOffset[0].left+this.r,y:this.squareOffset[0].top}],this.triangleData=[{a:100,b:101,c:102,pivot:100,translate:100,squareIndex:0,rotation:0}],this.squareData=[],this.dragPointData=[{index:999}],this.textData=[];break;case 1:this.points=[{id:1,x:0,y:0},{id:2,x:this.r,y:0},{id:3,x:this.squareSize,y:this.r},{id:4,x:this.squareSize-this.r,y:this.squareSize},{id:5,x:0,y:this.squareSize-this.r},{id:100,x:0,y:0},{id:101,x:this.r,y:0},{id:102,x:0,y:this.squareSize-this.r},{id:999,x:this.squareOffset[0].left+this.r,y:this.squareOffset[0].top}],this.triangleData=[{a:100,b:101,c:102,pivot:100,translate:1,squareIndex:0,rotation:0},{a:100,b:101,c:102,pivot:102,translate:2,squareIndex:0,rotation:180},{a:100,b:101,c:102,pivot:102,translate:3,squareIndex:0,rotation:270},{a:100,b:101,c:102,pivot:102,translate:4,squareIndex:0,rotation:360}],this.squareData=[{a:2,b:3,c:4,d:5,squareIndex:0,color:this.colors[0]}],this.dragPointData=[],this.textData=[];break;case 2:this.points=[{id:1,x:0,y:0},{id:2,x:this.r,y:0},{id:3,x:this.squareSize,y:this.r},{id:4,x:this.squareSize-this.r,y:this.squareSize},{id:5,x:0,y:this.squareSize-this.r},{id:100,x:0,y:0},{id:101,x:this.r,y:0},{id:102,x:0,y:this.squareSize-this.r},{id:999,x:this.squareOffset[0].left+this.r,y:this.squareOffset[0].top}],this.triangleData=[{a:100,b:101,c:102,pivot:100,translate:1,squareIndex:0,rotation:0},{a:100,b:101,c:102,pivot:102,translate:2,squareIndex:0,rotation:90},{a:100,b:101,c:102,pivot:102,translate:3,squareIndex:0,rotation:180},{a:100,b:101,c:102,pivot:102,translate:4,squareIndex:0,rotation:270}],this.squareData=[{a:2,b:3,c:4,d:5,squareIndex:0,color:this.colors[0]}],this.dragPointData=[{index:999}],this.textData=[];break;case 3:this.points=[{id:1,x:0,y:0},{id:2,x:this.r,y:0},{id:3,x:this.squareSize,y:this.r},{id:4,x:this.squareSize-this.r,y:this.squareSize},{id:5,x:0,y:this.squareSize-this.r},{id:100,x:0,y:0},{id:101,x:this.r,y:0},{id:102,x:0,y:this.squareSize-this.r},{id:998,x:(this.squareOffset[0].left+this.squareSize+this.squareOffset[1].left)/2-22,y:this.squareOffset[0].top+this.squareSize/2+43},{id:999,x:this.squareOffset[0].left+this.r,y:this.squareOffset[0].top}],this.triangleData=[{a:100,b:101,c:102,pivot:100,translate:1,squareIndex:0,rotation:0},{a:100,b:101,c:102,pivot:102,translate:2,squareIndex:0,rotation:90},{a:100,b:101,c:102,pivot:102,translate:3,squareIndex:0,rotation:180},{a:100,b:101,c:102,pivot:102,translate:4,squareIndex:0,rotation:270},{a:100,b:101,c:102,pivot:100,translate:1,squareIndex:1,rotation:0},{a:100,b:101,c:102,pivot:102,translate:2,squareIndex:1,rotation:90},{a:100,b:101,c:102,pivot:102,translate:3,squareIndex:1,rotation:180},{a:100,b:101,c:102,pivot:102,translate:4,squareIndex:1,rotation:270}],this.squareData=[{a:2,b:3,c:4,d:5,squareIndex:0,color:this.colors[0]},{a:2,b:3,c:4,d:5,squareIndex:1,color:"url(#gradient)"}],this.dragPointData=[{index:999}],this.textData=[{caption:"=",fontSize:"72pt",translate:998}];break;case 4:this.points=[{id:1,x:0,y:0},{id:2,x:this.r,y:0},{id:3,x:this.squareSize,y:this.r},{id:4,x:this.squareSize-this.r,y:this.squareSize},{id:5,x:0,y:this.squareSize-this.r},{id:100,x:0,y:0},{id:101,x:this.r,y:0},{id:102,x:0,y:this.squareSize-this.r},{id:200,x:this.squareSize-this.r,y:0},{id:201,x:this.squareSize,y:0},{id:202,x:this.squareSize-this.r,y:this.r},{id:203,x:this.squareSize,y:this.r},{id:204,x:0,y:this.r},{id:205,x:0,y:this.squareSize},{id:206,x:this.squareSize-this.r,y:this.squareSize},{id:998,x:(this.squareOffset[0].left+this.squareSize+this.squareOffset[1].left)/2-22,y:this.squareOffset[0].top+this.squareSize/2+43},{id:999,x:this.squareOffset[0].left+this.r,y:this.squareOffset[0].top}],this.triangleData=[{a:100,b:101,c:102,pivot:101,translate:2,squareIndex:0,rotation:0},{a:100,b:101,c:102,pivot:102,translate:2,squareIndex:0,rotation:90},{a:100,b:101,c:102,pivot:102,translate:3,squareIndex:0,rotation:180},{a:100,b:101,c:102,pivot:102,translate:4,squareIndex:0,rotation:270},{a:100,b:101,c:102,pivot:101,translate:2,squareIndex:1,rotation:0,rotationTo:-90,moveTo:1},{a:100,b:101,c:102,pivot:102,translate:2,squareIndex:1,rotation:90,moveTo:1},{a:100,b:101,c:102,pivot:102,translate:3,squareIndex:1,rotation:180},{a:100,b:101,c:102,pivot:102,translate:4,squareIndex:1,rotation:270,rotationTo:360}],this.squareData=[{a:2,b:3,c:4,d:5,squareIndex:0,color:this.colors[0]},{a:2,b:3,c:4,d:5,squareIndex:1,color:"url(#gradient)"},{a:200,b:201,c:203,d:202,squareIndex:1,color:this.colors[1]},{a:204,b:202,c:206,d:205,squareIndex:1,color:this.colors[2]}],this.dragPointData=[],this.textData=[{caption:"=",fontSize:"72pt",translate:998}];break;case 5:this.points=[{id:1,x:0,y:0},{id:2,x:this.r,y:0},{id:3,x:this.squareSize,y:this.r},{id:4,x:this.squareSize-this.r,y:this.squareSize},{id:5,x:0,y:this.squareSize-this.r},{id:100,x:0,y:0},{id:101,x:this.r,y:0},{id:102,x:0,y:this.squareSize-this.r},{id:200,x:this.squareSize-this.r,y:0},{id:201,x:this.squareSize,y:0},{id:202,x:this.squareSize-this.r,y:this.r},{id:203,x:this.squareSize,y:this.r},{id:204,x:0,y:this.r},{id:205,x:0,y:this.squareSize},{id:206,x:this.squareSize-this.r,y:this.squareSize},{id:998,x:(this.squareOffset[0].left+this.squareSize+this.squareOffset[1].left)/2-22,y:this.squareOffset[0].top+this.squareSize/2+43},{id:999,x:this.squareOffset[0].left+this.r,y:this.squareOffset[0].top}],this.triangleData=[{a:100,b:101,c:102,pivot:101,translate:2,squareIndex:0,rotation:0},{a:100,b:101,c:102,pivot:102,translate:2,squareIndex:0,rotation:90},{a:100,b:101,c:102,pivot:102,translate:3,squareIndex:0,rotation:180},{a:100,b:101,c:102,pivot:102,translate:4,squareIndex:0,rotation:270},{a:100,b:101,c:102,pivot:101,translate:1,squareIndex:1,rotation:270},{a:100,b:101,c:102,pivot:102,translate:1,squareIndex:1,rotation:90},{a:100,b:101,c:102,pivot:102,translate:3,squareIndex:1,rotation:180},{a:100,b:101,c:102,pivot:102,translate:4,squareIndex:1,rotation:0}],this.squareData=[{a:2,b:3,c:4,d:5,squareIndex:0,color:this.colors[0]},{a:200,b:201,c:203,d:202,squareIndex:1,color:this.colors[1]},{a:204,b:202,c:206,d:205,squareIndex:1,color:this.colors[2]}],this.dragPointData=[{index:999}],this.textData=[{caption:"=",fontSize:"72pt",translate:998}];break;case 6:this.points=[{id:1,x:0,y:0},{id:2,x:this.r,y:0},{id:3,x:this.squareSize,y:this.r},{id:4,x:this.squareSize-this.r,y:this.squareSize},{id:5,x:0,y:this.squareSize-this.r},{id:100,x:0,y:0},{id:101,x:this.r,y:0},{id:102,x:0,y:this.squareSize-this.r},{id:200,x:this.squareSize-this.r,y:0},{id:201,x:this.squareSize,y:0},{id:202,x:this.squareSize-this.r,y:this.r},{id:203,x:this.squareSize,y:this.r},{id:204,x:0,y:this.r},{id:205,x:0,y:this.squareSize},{id:206,x:this.squareSize-this.r,y:this.squareSize},{id:998,x:(this.squareOffset[0].left+this.squareSize+this.squareOffset[1].left)/2-22,y:this.squareOffset[0].top+this.squareSize/2+43},{id:999,x:this.squareOffset[0].left+this.r,y:this.squareOffset[0].top}],this.triangleData=[{a:100,b:101,c:102,pivot:101,translate:2,squareIndex:0,rotation:0},{a:100,b:101,c:102,pivot:102,translate:2,squareIndex:0,rotation:90},{a:100,b:101,c:102,pivot:102,translate:3,squareIndex:0,rotation:180},{a:100,b:101,c:102,pivot:102,translate:4,squareIndex:0,rotation:270},{a:100,b:101,c:102,pivot:101,translate:1,squareIndex:1,rotation:270},{a:100,b:101,c:102,pivot:102,translate:1,squareIndex:1,rotation:90},{a:100,b:101,c:102,pivot:102,translate:3,squareIndex:1,rotation:180},{a:100,b:101,c:102,pivot:102,translate:4,squareIndex:1,rotation:0}],this.squareData=[{a:2,b:3,c:4,d:5,squareIndex:0,color:this.colors[0]},{a:200,b:201,c:203,d:202,squareIndex:1,color:this.colors[1]},{a:204,b:202,c:206,d:205,squareIndex:1,color:this.colors[2]}],this.dragPointData=[],this.textData=[{caption:"=",fontSize:"72pt",translate:998}];break;case 7:this.points=[{id:1,x:0,y:0},{id:2,x:this.r,y:0},{id:3,x:this.squareSize,y:this.r},{id:4,x:this.squareSize-this.r,y:this.squareSize},{id:5,x:0,y:this.squareSize-this.r},{id:100,x:0,y:0},{id:101,x:this.r,y:0},{id:102,x:0,y:this.squareSize-this.r},{id:200,x:this.squareSize-this.r,y:0},{id:201,x:this.squareSize,y:0},{id:202,x:this.squareSize-this.r,y:this.r},{id:203,x:this.squareSize,y:this.r},{id:204,x:0,y:this.r},{id:205,x:0,y:this.squareSize},{id:206,x:this.squareSize-this.r,y:this.squareSize},{id:998,x:(this.squareOffset[0].left+this.squareSize+this.squareOffset[1].left)/2-22,y:this.squareOffset[0].top+this.squareSize/2+43},{id:999,x:this.squareOffset[0].left+this.r,y:this.squareOffset[0].top}],this.triangleData=[{a:100,b:101,c:102,pivot:101,translate:2,squareIndex:0,rotation:0},{a:100,b:101,c:102,pivot:102,translate:4,squareIndex:1,rotation:0}],this.squareData=[{a:2,b:3,c:4,d:5,squareIndex:0,color:this.colors[0]},{a:200,b:201,c:203,d:202,squareIndex:1,color:this.colors[1]},{a:204,b:202,c:206,d:205,squareIndex:1,color:this.colors[2]}],this.dragPointData=[{index:999}],this.textData=[{caption:"=",fontSize:"72pt",translate:998}]}}},{key:"redraw",value:function(){var a=this,b=arguments.length<=0||void 0===arguments[0]?this.currentStep:arguments[0];this.currentStep=b;var c=this;this.createShapes(b),this.triangles.selectAll(".outerTriangle").remove();var d=this.triangles.selectAll(".outerTriangle").data(this.triangleData),e=d.enter();this.createTriangles(e),d.exit().remove(),this.updateTriangles();var f=d3.behavior.drag().origin(function(a){return c.idToPoint(a.index)}).on("drag",function(a,b){var d=c.squareSize;c.r=(d3.event.x-c.squareOffset[0].left).clamp(0,d),c.redraw()}),g=this.dragPoint.selectAll("circle").data(this.dragPointData);g.attr("cx",function(a){return c.idToPoint(a.index).x}).attr("cy",function(a){return c.idToPoint(a.index).y}),g.enter().append("circle").attr("class","dragpoint").attr("r",10).attr("cx",function(a){return c.idToPoint(a.index).x}).attr("cy",function(a){return c.idToPoint(a.index).y}).call(f),g.exit().remove(),this.squares.selectAll(".square").remove();var h=this.squares.selectAll(".square").data(this.squareData),e=h.enter();this.createSquares(e),h.exit().remove(),this.updateSquares();var i=this.texts.selectAll("text").data(this.textData);if(i.exit().remove(),i.enter().append("text"),this.texts.selectAll("text").attr("transform",function(a){return"translate("+c.idToPoint(a.translate).x+","+c.idToPoint(a.translate).y+")"}).text(function(a){return a.caption}).attr("font-size",function(a){return a.fontSize}),1==b){var j=function(){return function(a,b){var c=d3.interpolate(a.rotation,a.rotation-90);return function(a){return"rotate("+c(a)%360+")"}}},k=1e3,l=2e3;this.squares.selectAll(".square").style("opacity",0).transition().ease("linear").duration(k).delay(function(a,b){return 3*(k+l)}).style("opacity",1).each("end",function(){stepper.onForward()}),this.triangles.selectAll(".outerTriangle").filter(function(a,b){return b>0}).style("opacity",0).transition().ease("linear").duration(k).delay(function(a,b){return b*(k+l)}).style("opacity",1).transition().selectAll(".middleTriangle").ease("linear").duration(l).attrTween("transform",j())}else if(4==b){var k,l,m;!function(){var b=function(){return function(a,b){var c=d3.interpolate(a.rotation,a.rotationTo);return function(a){return"rotate("+c(a)%360+")"}}},d=function(){return function(a,b){var d="translate("+(c.squareOffset[a.squareIndex].left+c.idToPoint(a.translate).x)+","+(c.squareOffset[a.squareIndex].top+c.idToPoint(a.translate).y)+")",e="translate("+(c.squareOffset[a.squareIndex].left+c.idToPoint(a.moveTo).x)+","+(c.squareOffset[a.squareIndex].top+c.idToPoint(a.moveTo).y)+")",f=d3.interpolateString(d,e);return function(a){return f(a)}}};k=1e3,l=2e3,m=2e3,a.squares.selectAll(".square").filter(function(a,b){return b>1&&1===a.squareIndex}).style("opacity",0),a.squares.selectAll(".square").filter(function(a,b){return 1===b}).transition().style("opacity",0).ease("linear").duration(k).each("end",function(){c.triangles.selectAll(".middleTriangle").filter(function(a,b){return 4===b||7===b}).transition().ease("linear").duration(l).delay(function(a,b){return(1-b)*l}).attrTween("transform",b()).call(endAll,function(){c.triangles.selectAll(".outerTriangle").filter(function(a,b){return 4===b||5===b}).transition().ease("linear").duration(m).attrTween("transform",d()).call(endAll,function(){c.squares.selectAll(".square").filter(function(a,b){return b>1&&1===a.squareIndex}).transition().style("opacity",1).ease("linear").duration(k).call(endAll,function(){stepper.onForward()})})})})}()}else if(6==b){var k=2e3;this.triangles.selectAll(".outerTriangle").filter(function(a,b){return 1===b||4===b}).style("opacity",1).transition().ease("linear").duration(k).delay(0).style("opacity",0),this.triangles.selectAll(".outerTriangle").filter(function(a,b){return 2===b||5===b}).style("opacity",1).transition().ease("linear").duration(k).delay(k).style("opacity",0),this.triangles.selectAll(".outerTriangle").filter(function(a,b){return 3===b||6===b}).style("opacity",1).transition().ease("linear").duration(k).delay(2*k).style("opacity",0).call(endAll,function(){stepper.onForward()})}}},{key:"createTriangles",value:function(a){var b=a.append("svg:g").attr("class","outerTriangle"),c=b.append("svg:g").attr("class","middleTriangle");c.append("polygon").attr("class","innerTriangle")}},{key:"createSquares",value:function(a){a.append("polygon").attr("class","square")}},{key:"updateTriangles",value:function(){var a=this,b=this.triangles.selectAll(".outerTriangle").attr("transform",function(b){return"translate("+(a.squareOffset[b.squareIndex].left+a.idToPoint(b.translate).x)+","+(a.squareOffset[b.squareIndex].top+a.idToPoint(b.translate).y)+")"}).style("opacity",1),c=b.selectAll(".middleTriangle").data(function(a){return[a]}).attr("transform",function(a){return"rotate("+a.rotation+")"});c.selectAll(".innerTriangle").data(function(a){return[a]}).attr("points",function(b){return a.idToPoint(b.a).x+" "+a.idToPoint(b.a).y+", "+a.idToPoint(b.b).x+" "+a.idToPoint(b.b).y+", "+a.idToPoint(b.c).x+" "+a.idToPoint(b.c).y}).attr("transform",function(b){return"translate("+-a.idToPoint(b.pivot).x+","+-a.idToPoint(b.pivot).y+")"})}},{key:"updateSquares",value:function(){var a=this;this.squares.selectAll(".square").attr("points",function(b){return a.idToPoint(b.a).x+" "+a.idToPoint(b.a).y+", "+a.idToPoint(b.b).x+" "+a.idToPoint(b.b).y+", "+a.idToPoint(b.c).x+" "+a.idToPoint(b.c).y+", "+a.idToPoint(b.d).x+" "+a.idToPoint(b.d).y}).style("fill",function(a){return a.color}).attr("transform",function(b){return"translate("+a.squareOffset[b.squareIndex].left+","+a.squareOffset[b.squareIndex].top+")"})}},{key:"onStep",value:function(a){return this.container.selectAll(".outerTriangle, .middleTriangle, .innerTriangle, .square").transition(),_get(Object.getPrototypeOf(b.prototype),"onStep",this).call(this,a)}},{key:"createGradient",value:function(){var a=this.svg.append("defs").append("linearGradient").attr("id","gradient").attr("x1","30%").attr("y1","30%").attr("x2","100%").attr("y2","100%").attr("spreadMethod","pad");a.append("stop").attr("offset","0%").attr("stop-color",this.colors[1]).attr("stop-opacity",1),a.append("stop").attr("offset","100%").attr("stop-color",this.colors[2]).attr("stop-opacity",1)}}]),b}(ISteppable),_createClass=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),Stepper=function(){function a(){_classCallCheck(this,a),this.currentLayer=1,this.callbacks=[],window.addEventListener("keydown",this.onKeyDown.bind(this),!1)}return _createClass(a,[{key:"onForward",value:function(){var a=arguments.length<=0||void 0===arguments[0]?this.currentLayer:arguments[0];this.currentLayer=a,this.doStep(!0)}},{key:"onBackward",value:function(){var a=arguments.length<=0||void 0===arguments[0]?this.currentLayer:arguments[0];this.currentLayer=a,this.doStep(!1)}},{key:"doStep",value:function(a){for(var b={canBackward:!1,canForward:!1},c=0;c<this.callbacks[this.currentLayer].length;c++)b=this.callbacks[this.currentLayer][c](a);this.disableButtons(this.currentLayer,b)}},{key:"disableButtons",value:function(a,b){document.getElementById("leftBtn"+a).disabled=!b.canBackward,document.getElementById("rightBtn"+a).disabled=!b.canForward}},{key:"registerCallback",value:function(a,b){"undefined"==typeof this.callbacks[a]&&(this.callbacks[a]=[]),this.callbacks[a].push(b),this.disableButtons(a,{canBackward:!1,canForward:!0})}},{key:"onKeyDown",value:function(a){switch(a.keyCode){case 65:case 37:this.onBackward(1);break;case 68:case 39:this.onForward(1)}}}]),a}();
//# sourceMappingURL=sourceMap.map