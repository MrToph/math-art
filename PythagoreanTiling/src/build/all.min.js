!function(t){function e(n){if(r[n])return r[n].exports;var a=r[n]={exports:{},id:n,loaded:!1};return t[n].call(a.exports,a,a.exports,e),a.loaded=!0,a.exports}var r={};return e.m=t,e.c=r,e.p="",e(0)}([function(t,e,r){t.exports=r(1)},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}var a=r(2),i=n(a),o=r(4);n(o);window.stepper={},jQuery(function(){new i["default"](jQuery("#svgContainer").get(0))})},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var c=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),u=function f(t,e,r){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,e);if(void 0===n){var a=Object.getPrototypeOf(t);return null===a?void 0:f(a,e,r)}if("value"in n)return n.value;var i=n.get;if(void 0!==i)return i.call(r)},s=r(3),l=n(s),d=function(t){function e(t){a(this,e);var r=i(this,Object.getPrototypeOf(e).call(this));r.svg=null,r.margin={top:-0,right:-0,bottom:-0,left:-0},r.width=1e3,r.height=1e3,r.currentStep=0,r.maxStep=1;var n=r.width+r.margin.left+r.margin.right,o=r.height+r.margin.top+r.margin.bottom;r.layer=3,r.ratio=.618,r.dragRectPos=[n/2,o/2],r.eleSize=r.width/r.layer,r.translate=[0,0],r.scale=1;var c=d3.select(t).append("svg").attr("viewBox","0 0 "+n+" "+o).append("g").attr("transform","translate("+r.margin.left+","+r.margin.right+")");r.svg=c,c.append("rect").attr("class","svgOuterRect").attr("x",-r.margin.left).attr("y",-r.margin.top).attr("width",n).attr("height",o);var u=c.append("g").attr("class","container").attr("transform","translate("+r.translate[0]+","+r.translate[1]+"),scale("+r.scale+")");return r.container=u,r.elements=r.container.append("g"),r.outer=r.container.append("g"),r.dragRect=r.container.append("g"),r.redraw(0),r}return o(e,t),c(e,[{key:"createData",value:function(t){for(var e=this,r=[],n=this.ratio,a=1-n,i=n*this.eleSize,o=a*this.eleSize,c=this.layer,u=0,s=0,l=function(t,r,n){return!(0>t+n||0>r+n||t>e.width||r>e.height)},d=Math.floor(-1.5*c);1.5*c>d;d++){u=d*i,s=0-d*o;for(var f=-1*c;1*c>f;f++)l(u,s,i)&&r.push({id:[f,d,0],x:u,y:s,size:i,type:0}),l(u,s+i,o)&&r.push({id:[f,d,0],x:u,y:s+i,size:o,type:1}),u+=o,s+=i}this.elementData=r;var h=[],p=5,y=200,v=50;u=this.width-v-y,s=v,h.push({leftTopCorner:[u,s-p],leftBotCorner:[u,s+p],middleStart:[u,s],middleEnd:[u+y,s],rightTopCorner:[u+y,s-p],rightBotCorner:[u+y,s+p],radius:15,x:u+this.ratio*y,y:s}),this.outerData=h,this.createDragRectData()}},{key:"createDragRectData",value:function(){var t=this.ratio*this.eleSize,e=(1-this.ratio)*this.eleSize,r=this.dragRectPos,n=[r[0]-e,r[1]-t],a=[n[0]+t,n[1]-e],i=[a[0]+e,a[1]+t],o={a:n,b:a,c:i,d:r};this.dragRectData=[o]}},{key:"redraw",value:function(){var t=arguments.length<=0||void 0===arguments[0]?this.currentStep:arguments[0];this.currentStep=t,this.createData(t),this.elements.selectAll(".element").remove(),this.createElements(t)}},{key:"createElements",value:function(t){var e=this,r=this.elements.selectAll(".element").data(this.elementData);r.enter().append("rect").attr("class","element").attr("x",function(t){return t.x}).attr("y",function(t){return t.y}).attr("width",function(t){return t.size}).attr("height",function(t){return t.size}).classed("type0",function(t){return 0===t.type}).classed("type1",function(t){return 1===t.type});var n=d3.behavior.drag().origin(function(t){return t}).on("drag",function(t,r){var n=Math.max(t.middleStart[0],Math.min(t.middleEnd[0],d3.event.x));e.ratio=(n-t.middleStart[0])/(t.middleEnd[0]-t.middleStart[0]),e.redraw()}),a=this.outer.selectAll(".outerGroup").data(this.outerData).enter().append("g").attr("class","outerGroup");a.append("polyline").attr("class","axis").attr("points",function(t){return t.leftTopCorner[0]+","+t.leftTopCorner[1]+" "+t.leftBotCorner[0]+","+t.leftBotCorner[1]+" "+t.middleStart[0]+","+t.middleStart[1]+" \n        "+t.middleEnd[0]+","+t.middleEnd[1]+" "+t.rightTopCorner[0]+","+t.rightTopCorner[1]+" "+t.rightBotCorner[0]+","+t.rightBotCorner[1]}),a.append("circle").attr("class","dragPoint").attr("cx",function(t){return t.x}).attr("cy",function(t){return t.y}).attr("r",function(t){return t.radius}).style("cursor","w-resize").call(n),this.outer.selectAll(".outerGroup").select(".dragPoint").attr("cx",function(t){return t.x});var i=this.dragRect.selectAll(".dragRect").data(this.dragRectData).enter().append("polyline").attr("class","dragRect").attr("points",function(t){return t.a[0]+","+t.a[1]+" "+t.b[0]+","+t.b[1]+" "+t.c[0]+","+t.c[1]+" "+t.d[0]+","+t.d[1]+" "+t.a[0]+","+t.a[1]});i.empty()||!function(){var t=e;e.svg.on("mousemove",function(){var e=d3.mouse(this);t.dragRectPos=[e[0],e[1]],t.createDragRectData(),i.data(t.dragRectData).attr("points",function(t){return t.a[0]+","+t.a[1]+" "+t.b[0]+","+t.b[1]+" "+t.c[0]+","+t.c[1]+" "+t.d[0]+","+t.d[1]+" "+t.a[0]+","+t.a[1]})})}()}},{key:"onStep",value:function(t){return u(Object.getPrototypeOf(e.prototype),"onStep",this).call(this,t)}}]),e}(l["default"]);e["default"]=d},function(t,e){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),a=function(){function t(){r(this,t),this.maxStep=0}return n(t,[{key:"redraw",value:function(){arguments.length<=0||void 0===arguments[0]?this.currentStep:arguments[0],arguments[1]}},{key:"onStep",value:function(t){var e=this.currentStep;t?e++:e--,e=Math.min(Math.max(e,0),this.maxStep);var r={canBackward:!1,canForward:!1};return e>0&&(r.canBackward=!0),e<this.maxStep&&(r.canForward=!0),e===this.currentStep?r:(this.currentStep=e,this.redraw(this.currentStep,t),r)}}]),t}();e["default"]=a},function(t,e){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),a=function(){function t(){r(this,t),this.currentLayer=1,this.callbacks=[],window.addEventListener("keydown",this.onKeyDown.bind(this),!1)}return n(t,[{key:"onForward",value:function(){var t=arguments.length<=0||void 0===arguments[0]?this.currentLayer:arguments[0];this.currentLayer=t,this.doStep(!0)}},{key:"onBackward",value:function(){var t=arguments.length<=0||void 0===arguments[0]?this.currentLayer:arguments[0];this.currentLayer=t,this.doStep(!1)}},{key:"doStep",value:function(t){for(var e={canBackward:!1,canForward:!1},r=0;r<this.callbacks[this.currentLayer].length;r++)e=this.callbacks[this.currentLayer][r](t);this.disableButtons(this.currentLayer,e)}},{key:"disableButtons",value:function(t,e){document.getElementById("leftBtn"+t).disabled=!e.canBackward,document.getElementById("rightBtn"+t).disabled=!e.canForward}},{key:"registerCallback",value:function(t,e){"undefined"==typeof this.callbacks[t]&&(this.callbacks[t]=[]),this.callbacks[t].push(e),this.disableButtons(t,{canBackward:!1,canForward:!0})}},{key:"onKeyDown",value:function(t){switch(t.keyCode){case 65:case 37:this.onBackward(1);break;case 68:case 39:this.onForward(1)}}}]),t}();e["default"]=a}]);