"use strict";function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _taggedTemplateLiteral(a,b){return Object.freeze(Object.defineProperties(a,{raw:{value:Object.freeze(b)}}))}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function _inherits(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function _inherits(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function endAll(a,b){var c;a.empty()?b():(c=a.size(),a.each("end",function(){c--,0===c&&b()}))}var stepper={};jQuery(function(){stepper=new Stepper;var a=new Visualization(jQuery("#svgContainer").get(0));stepper.registerCallback(1,a.onStep.bind(a));var b=new MathContainer(jQuery("#mathContainer").get(0));stepper.registerCallback(1,b.onStep.bind(b))}),Number.prototype.clamp=function(a,b){return Math.min(Math.max(this,a),b)};var _createClass=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),ISteppable=function(){function a(){_classCallCheck(this,a),this.maxStep=0}return _createClass(a,[{key:"redraw",value:function(){arguments.length<=0||void 0===arguments[0]?this.currentStep:arguments[0]}},{key:"onStep",value:function(a){var b=this.currentStep;a?b++:b--,b=b.clamp(0,this.maxStep);var c={canBackward:!1,canForward:!1};return b>0&&(c.canBackward=!0),b<this.maxStep&&(c.canForward=!0),b===this.currentStep?c:(this.currentStep=b,this.redraw(this.currentStep),c)}}]),a}(),_createClass=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),_templateObject=_taggedTemplateLiteral(["definecolor{colorRed}{RGB}{255,50,50}definecolor{colorGreen}{RGB}{50,205,50}\n                                    definecolor{colorBlue}{RGB}{50,50,255}definecolor{colorOrange}{RGB}{255,165,0}definecolor{colorPurple}{RGB}{138,43,226}"],["\\definecolor{colorRed}{RGB}{255,50,50}\\definecolor{colorGreen}{RGB}{50,205,50}\n                                    \\definecolor{colorBlue}{RGB}{50,50,255}\\definecolor{colorOrange}{RGB}{255,165,0}\\definecolor{colorPurple}{RGB}{138,43,226}"]),_templateObject2=_taggedTemplateLiteral(["2(	extcolor{colorRed}{1} + 	extcolor{colorBlue}{2} + 	extcolor{colorGreen}{3} + 	extcolor{colorOrange}{4} + ldots + 	extcolor{colorPurple}{n})"],["2(\\textcolor{colorRed}{1} + \\textcolor{colorBlue}{2} + \\textcolor{colorGreen}{3} + \\textcolor{colorOrange}{4} + \\ldots + \\textcolor{colorPurple}{n})"]),_templateObject3=_taggedTemplateLiteral(["2(1 + 2 + 3 + 4 + ldots + n) = n (n+1)"],["2(1 + 2 + 3 + 4 + \\ldots + n) = n (n+1)"]),MathContainer=function(a){function b(a){_classCallCheck(this,b);var c=_possibleConstructorReturn(this,Object.getPrototypeOf(b).call(this));return c.width=1200,c.height=500,c.currentStep=0,c.element=a,c.maxStep=2,c.oldInnerHTML="",MathJax.Hub.Queue(function(){c.jax=MathJax.Hub.getAllJax("mathContainer")[0]},function(){c.redraw(0)}),c}return _inherits(b,a),_createClass(b,[{key:"redraw",value:function(){var a=(arguments.length<=0||void 0===arguments[0]?this.currentStep:arguments[0],this.getTextForCurrentStep());a!==this.oldInnerHTML&&(this.oldInnerHTML=a,MathJax.Hub.queue.Push(["Text",this.jax,a]))}},{key:"getTextForCurrentStep",value:function(){var a=String.raw(_templateObject),b="";switch(this.currentStep){case 0:b=String.raw(_templateObject2);break;case 1:case 2:b=String.raw(_templateObject3)}return a+" \\smash{"+b+"}"}}]),b}(ISteppable),_createClass=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),Stepper=function(){function a(){_classCallCheck(this,a),this.currentLayer=1,this.callbacks=[],window.addEventListener("keydown",this.onKeyDown.bind(this),!1)}return _createClass(a,[{key:"onForward",value:function(){var a=arguments.length<=0||void 0===arguments[0]?this.currentLayer:arguments[0];this.currentLayer=a,this.doStep(!0)}},{key:"onBackward",value:function(){var a=arguments.length<=0||void 0===arguments[0]?this.currentLayer:arguments[0];this.currentLayer=a,this.doStep(!1)}},{key:"doStep",value:function(a){for(var b={canBackward:!1,canForward:!1},c=0;c<this.callbacks[this.currentLayer].length;c++)b=this.callbacks[this.currentLayer][c](a);this.disableButtons(this.currentLayer,b)}},{key:"disableButtons",value:function(a,b){document.getElementById("leftBtn"+a).disabled=!b.canBackward,document.getElementById("rightBtn"+a).disabled=!b.canForward}},{key:"registerCallback",value:function(a,b){"undefined"==typeof this.callbacks[a]&&(this.callbacks[a]=[]),this.callbacks[a].push(b),this.disableButtons(a,{canBackward:!1,canForward:!0})}},{key:"onKeyDown",value:function(a){switch(a.keyCode){case 65:case 37:this.onBackward(1);break;case 68:case 39:this.onForward(1)}}}]),a}(),_createClass=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),_get=function a(b,c,d){null===b&&(b=Function.prototype);var e=Object.getOwnPropertyDescriptor(b,c);if(void 0===e){var f=Object.getPrototypeOf(b);return null===f?void 0:a(f,c,d)}if("value"in e)return e.value;var g=e.get;if(void 0!==g)return g.call(d)},Visualization=function(a){function b(a){_classCallCheck(this,b);var c=_possibleConstructorReturn(this,Object.getPrototypeOf(b).call(this));c.svg=null,c.margin={top:-0,right:-0,bottom:-0,left:-0},c.width=1e3,c.height=500,c.currentStep=0,c.maxStep=2,c.translate=[0,0],c.scale=1;var d=c.width+c.margin.left+c.margin.right,e=c.height+c.margin.top+c.margin.bottom,f=d3.select(a).append("svg").attr("viewBox","0 0 "+d+" "+e).append("g").attr("transform","translate("+c.margin.left+","+c.margin.right+")");c.svg=f;var g=(f.append("rect").attr("class","svgOuterRect").attr("x",-c.margin.left).attr("y",-c.margin.top).attr("width",d).attr("height",e),f.append("g").attr("transform","translate("+c.translate[0]+","+c.translate[1]+"),scale("+c.scale+")"));return c.container=g,c.triangles=[c.container.append("g"),c.container.append("g")],c.colors=["#ff3232","#3232ff","#32CD32","#ffa500","#8A2BE2"],c.trWidth=100,c.trHeight=c.trWidth,c.margin=2*c.trWidth,c.numCells=5,c.redraw(0),c}return _inherits(b,a),_createClass(b,[{key:"createData",value:function(a){switch(a){default:this.triangleDrawData=[],this.triangleDrawData.push(this.createTriangleData(!1)),this.triangleDrawData.push(this.createTriangleData(!0))}}},{key:"createTriangleData",value:function(a){for(var b=[],c=0;c<this.numCells;c++)for(var d=0;c>=d;d++){var e=a?this.numCells-1-d:d,f=a?this.numCells-1-c:c,g=a?this.numCells*this.trWidth:0,h=e*this.trWidth+g,i=f*this.trHeight,j=c;b.push({id:[c,d],width:this.trWidth,height:this.trHeight,layer:j,x:h,y:i})}return b}},{key:"redraw",value:function(){var a=this,b=arguments.length<=0||void 0===arguments[0]?this.currentStep:arguments[0];this.currentStep=b,this.createData(b);for(var c=0;2>c;c++)this.createTriangle(b,c);1===b&&!function(){var b=3e3,c=(a.numCells-1)/2*a.trWidth;a.triangles[0].selectAll(".square").transition().ease("linear").duration(b).attr("x",function(a){return a.x+c}),c=-c,a.triangles[1].selectAll(".square").transition().ease("linear").duration(b).attr("x",function(a){return a.x+c}).call(endAll,function(){stepper.onForward()})}()}},{key:"createTriangle",value:function(a,b){var c=this;this.numCells*this.trWidth;this.triangles[b].selectAll(".square").remove();var d=this.triangles[b].selectAll(".square").data(this.triangleDrawData[b]);d.enter().append("rect").attr("class","square");var e=2===a?(this.numCells-1)/2*this.trWidth:0;e=0===b?e:-e,d=this.triangles[b].selectAll(".square").attr("width",function(a){return a.width}).attr("height",function(a){return a.height}).attr("x",function(a){return a.x+e}).attr("y",function(a){return a.y}).attr("fill",function(d,e){return 0===a?c.colors[d.layer]:c.colors[b]})}},{key:"onStep",value:function(a){return this.container.selectAll(".square").transition(),_get(Object.getPrototypeOf(b.prototype),"onStep",this).call(this,a)}}]),b}(ISteppable);
//# sourceMappingURL=sourceMap.map