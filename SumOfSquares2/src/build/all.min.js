"use strict";function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _taggedTemplateLiteral(a,b){return Object.freeze(Object.defineProperties(a,{raw:{value:Object.freeze(b)}}))}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function _inherits(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function _inherits(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function endAll(a,b){var c;a.empty()?b():(c=a.size(),a.each("end",function(){c--,0===c&&b()}))}var stepper={};jQuery(function(){stepper=new Stepper;var a=new Visualization(jQuery("#svgContainer").get(0));stepper.registerCallback(1,a.onStep.bind(a));var b=new MathContainer(jQuery("#mathContainer").get(0));stepper.registerCallback(1,b.onStep.bind(b))}),Number.prototype.clamp=function(a,b){return Math.min(Math.max(this,a),b)};var _createClass=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),ISteppable=function(){function a(){_classCallCheck(this,a),this.maxStep=0}return _createClass(a,[{key:"redraw",value:function(){arguments.length<=0||void 0===arguments[0]?this.currentStep:arguments[0]}},{key:"onStep",value:function(a){var b=this.currentStep;a?b++:b--,b=b.clamp(0,this.maxStep);var c={canBackward:!1,canForward:!1};return b>0&&(c.canBackward=!0),b<this.maxStep&&(c.canForward=!0),b===this.currentStep?c:(this.currentStep=b,this.redraw(this.currentStep),c)}}]),a}(),_createClass=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),_templateObject=_taggedTemplateLiteral(["definecolor{colorRed}{RGB}{255,50,50}definecolor{colorGreen}{RGB}{50,205,50}\n                                    definecolor{colorBlue}{RGB}{50,50,255}definecolor{colorYellow}{RGB}{255,165,0}definecolor{colorPurple}{RGB}{138,43,226}"],["\\definecolor{colorRed}{RGB}{255,50,50}\\definecolor{colorGreen}{RGB}{50,205,50}\n                                    \\definecolor{colorBlue}{RGB}{50,50,255}\\definecolor{colorYellow}{RGB}{255,165,0}\\definecolor{colorPurple}{RGB}{138,43,226}"]),_templateObject2=_taggedTemplateLiteral(["	extcolor{colorRed}{1^2} + 	extcolor{colorGreen}{2^2} + 	extcolor{colorBlue}{3^2} + ldots + 	extcolor{colorYellow}{n^2}"],["\\textcolor{colorRed}{1^2} + \\textcolor{colorGreen}{2^2} + \\textcolor{colorBlue}{3^2} + \\ldots + \\textcolor{colorYellow}{n^2}"]),_templateObject3=_taggedTemplateLiteral(["3 (	extcolor{colorRed}{1^2} + 	extcolor{colorGreen}{2^2} + 	extcolor{colorBlue}{3^2} + ldots + 	extcolor{colorYellow}{n^2}) \n                                    = \frac{n (n+1)}{2} 	extcolor{colorPurple}{(2n + 1)}"],["3 (\\textcolor{colorRed}{1^2} + \\textcolor{colorGreen}{2^2} + \\textcolor{colorBlue}{3^2} + \\ldots + \\textcolor{colorYellow}{n^2}) \n                                    = \\frac{n (n+1)}{2} \\textcolor{colorPurple}{(2n + 1)}"]),MathContainer=function(a){function b(a){_classCallCheck(this,b);var c=_possibleConstructorReturn(this,Object.getPrototypeOf(b).call(this));return c.width=1200,c.height=500,c.currentStep=0,c.element=a,c.maxStep=1,c.oldInnerHTML="",MathJax.Hub.Queue(function(){c.jax=MathJax.Hub.getAllJax("mathContainer")[0]},function(){c.redraw(0)}),c}return _inherits(b,a),_createClass(b,[{key:"redraw",value:function(){var a=(arguments.length<=0||void 0===arguments[0]?this.currentStep:arguments[0],this.getTextForCurrentStep());a!==this.oldInnerHTML&&(this.oldInnerHTML=a,MathJax.Hub.queue.Push(["Text",this.jax,a]))}},{key:"getTextForCurrentStep",value:function(){var a=String.raw(_templateObject),b="";switch(this.currentStep){case 0:b=String.raw(_templateObject2);break;case 1:b=String.raw(_templateObject3)}return a+" \\smash{"+b+"}"}}]),b}(ISteppable),_createClass=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),Stepper=function(){function a(){_classCallCheck(this,a),this.currentLayer=1,this.callbacks=[],window.addEventListener("keydown",this.onKeyDown.bind(this),!1)}return _createClass(a,[{key:"onForward",value:function(){var a=arguments.length<=0||void 0===arguments[0]?this.currentLayer:arguments[0];this.currentLayer=a,this.doStep(!0)}},{key:"onBackward",value:function(){var a=arguments.length<=0||void 0===arguments[0]?this.currentLayer:arguments[0];this.currentLayer=a,this.doStep(!1)}},{key:"doStep",value:function(a){for(var b={canBackward:!1,canForward:!1},c=0;c<this.callbacks[this.currentLayer].length;c++)b=this.callbacks[this.currentLayer][c](a);this.disableButtons(this.currentLayer,b)}},{key:"disableButtons",value:function(a,b){document.getElementById("leftBtn"+a).disabled=!b.canBackward,document.getElementById("rightBtn"+a).disabled=!b.canForward}},{key:"registerCallback",value:function(a,b){"undefined"==typeof this.callbacks[a]&&(this.callbacks[a]=[]),this.callbacks[a].push(b),this.disableButtons(a,{canBackward:!1,canForward:!0})}},{key:"onKeyDown",value:function(a){switch(a.keyCode){case 65:case 37:this.onBackward(1);break;case 68:case 39:this.onForward(1)}}}]),a}(),_slicedToArray=function(){function a(a,b){var c=[],d=!0,e=!1,f=void 0;try{for(var g,h=a[Symbol.iterator]();!(d=(g=h.next()).done)&&(c.push(g.value),!b||c.length!==b);d=!0);}catch(i){e=!0,f=i}finally{try{!d&&h["return"]&&h["return"]()}finally{if(e)throw f}}return c}return function(b,c){if(Array.isArray(b))return b;if(Symbol.iterator in Object(b))return a(b,c);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),_createClass=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),_get=function a(b,c,d){null===b&&(b=Function.prototype);var e=Object.getOwnPropertyDescriptor(b,c);if(void 0===e){var f=Object.getPrototypeOf(b);return null===f?void 0:a(f,c,d)}if("value"in e)return e.value;var g=e.get;if(void 0!==g)return g.call(d)},Visualization=function(a){function b(a){_classCallCheck(this,b);var c=_possibleConstructorReturn(this,Object.getPrototypeOf(b).call(this));c.svg=null,c.margin={top:-0,right:-0,bottom:-0,left:-0},c.width=2600,c.height=500,c.currentStep=0,c.maxStep=1,c.translate=[0,0],c.scale=1;var d=c.width+c.margin.left+c.margin.right,e=c.height+c.margin.top+c.margin.bottom,f=d3.select(a).append("svg").attr("viewBox","0 0 "+d+" "+e).append("g").attr("transform","translate("+c.margin.left+","+c.margin.right+")");c.svg=f;var g=(f.append("rect").attr("class","svgOuterRect").attr("x",-c.margin.left).attr("y",-c.margin.top).attr("width",d).attr("height",e),f.append("g").attr("transform","translate("+c.translate[0]+","+c.translate[1]+"),scale("+c.scale+")"));return c.container=g,c.triangles=g.append("svg:g"),c.texts=g.append("svg:g"),c.colors=["#ff3232","#32CD32","#3232ff","#000000","#ffa500","#8A2BE2"],c.trWidth=100,c.trHeight=c.trWidth,c.margin=2*c.trWidth,c.numCells=5,c.redraw(0),c}return _inherits(b,a),_createClass(b,[{key:"createData",value:function(a){var b=this;switch(a){default:this.triangleDrawData=[],this.triangleDrawData.push(this.createTriangleData(function(a){var c=_slicedToArray(a,2),d=c[0],e=c[1],f=d,g=d+1;return d===b.numCells-2?g=3>e?"⋮":"⋱":d===b.numCells-1&&(g="n"),[g,f]})),this.triangleDrawData.push(this.createTriangleData(function(a){var c=_slicedToArray(a,2),d=c[0],e=c[1],f=b.numCells-1-(d-e),g=b.numCells-(d-e);if(g==b.numCells-1)switch(e){case 0:g="⋮";break;case 3:g="…";break;default:g="⋰"}else g==b.numCells&&(g="n");return[g,f]})),this.triangleDrawData.push(this.createTriangleData(function(a){var c=_slicedToArray(a,2),d=c[0],e=c[1],f=b.numCells-1-e,g=b.numCells-e;if(g==b.numCells-1)switch(d){case 1:g="⋱";break;default:g="…"}else g==b.numCells&&(g="n");return[g,f]})),this.triangleDrawData.push(this.createTriangleData(function(a){var c=_slicedToArray(a,2);c[0],c[1];return["2n+1",b.numCells]}));var c=this.numCells*this.trWidth;this.operandData=[{x:c+.5*this.margin,y:.5*c,caption:"+",fontSize:"96pt"},{x:2*c+1.5*this.margin,y:.5*c,caption:"+",fontSize:"96pt"},{x:3*c+2.5*this.margin,y:.5*c,caption:"=",fontSize:"96pt"}]}}},{key:"createTriangleData",value:function(a){for(var b=[],c=0;c<this.numCells;c++)for(var d=0;c>=d;d++){var e=d*this.trWidth,f=c*this.trHeight,g=a([c,d]),h=_slicedToArray(g,2),i=h[0],j=h[1];b.push({id:[c,d],width:this.trWidth,height:this.trHeight,caption:i,layer:j,x:e,y:f})}return b}},{key:"redraw",value:function(){var a=this,b=arguments.length<=0||void 0===arguments[0]?this.currentStep:arguments[0];this.currentStep=b,this.createData(b),this.triangles.selectAll(".squareContainer0, .squareContainer1, .squareContainer2, .squareContainer3").remove();for(var c=0;4>c;c++)this.createTriangle(c);this.createOperands(),0===b&&!function(){var b=2250,c=a.triangles.selectAll(".squareContainer0, .squareContainer1, .squareContainer2, .squareContainer3").select(".squareText");c.style("opacity",0).transition().ease("linear").duration(b).delay(function(a){return a.layer*b}).style("opacity",1).call(endAll,function(){stepper.onForward()})}()}},{key:"createOperands",value:function(){var a=this.texts.selectAll(".operand").data(this.operandData).enter().append("text").attr("class","operand");a=this.texts.selectAll(".operand").text(function(a){return a.caption}).attr("text-anchor","middle").attr("dominant-baseline","middle").attr("transform",function(a){return"translate("+a.x+","+1.1*a.y+")"}).attr("font-size",function(a){return a.fontSize})}},{key:"createTriangle",value:function(a){var b=this,c=this.numCells*this.trWidth,d=this.triangles.selectAll(".squareContainer"+a).data(this.triangleDrawData[a]),e=d.enter().append("g").attr("class","squareContainer"+a);e.append("rect").attr("class","square"),e.append("text").attr("class","squareText"),d=this.triangles.selectAll(".squareContainer"+a),d.attr("transform","translate("+a*(c+this.margin)+", 0)"),d.selectAll(".square").data(function(a){return[a]}).attr("width",function(a){return a.width}).attr("height",function(a){return a.height}).attr("x",function(a){return a.x}).attr("y",function(a){return a.y});var f=3===a?"23pt":"36pt";d.selectAll(".squareText").data(function(a){return[a]}).text(function(a){return a.caption}).attr("text-anchor","middle").attr("dominant-baseline","middle").attr("transform",function(a){return"translate("+(a.x+.5*a.width)+","+(a.y+.55*a.height)+")"}).attr("font-size",f).style("opacity",1).attr("fill",function(a){return b.colors[a.layer]})}},{key:"onStep",value:function(a){return this.container.selectAll(".squareText").transition(),_get(Object.getPrototypeOf(b.prototype),"onStep",this).call(this,a)}}]),b}(ISteppable);
//# sourceMappingURL=sourceMap.map